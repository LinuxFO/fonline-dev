---
title: _macros.fos
description: " FOnline: 2238 Rotators  _macros.fos ..."
---

# _macros.fos


FOnline: 2238
Rotators

_macros.fos


## Includes

- `_defines.fos`
- `_math.fos`
- `_vars.fos`
- `_maps.fos`
- `_dialogs.fos`
- `_animation.fos`
- `ITEMPID.H`
- `_globalvars.fos`
- `_time.fos`
- `groups_h.fos`

## Included By

- [_town.fos](_town.fos.md)
- [all_brahmin.fos](all_brahmin.fos.md)
- [all_brahmin_herdsman.fos](all_brahmin_herdsman.fos.md)
- [all_farmer.fos](all_farmer.fos.md)
- [antiblock.fos](antiblock.fos.md)
- [attach.fos](attach.fos.md)
- [bank_vault.fos](bank_vault.fos.md)
- [billboards.fos](billboards.fos.md)
- [blackjack_shoe.fos](blackjack_shoe.fos.md)
- [blueprints.fos](blueprints.fos.md)
- [books.fos](books.fos.md)
- [brahmin_pen.fos](brahmin_pen.fos.md)
- [brahmin_pen_h.fos](brahmin_pen_h.fos.md)
- [brahmin_pens.fos](brahmin_pens.fos.md)
- [brahmin_trader.fos](brahmin_trader.fos.md)
- [brahmin_traders.fos](brahmin_traders.fos.md)
- [broadcast.fos](broadcast.fos.md)
- [buffer.fos](buffer.fos.md)
- [buffer_lazy.fos](buffer_lazy.fos.md)
- [car.fos](car.fos.md)
- [car_seller.fos](car_seller.fos.md)
- [caravans.fos](caravans.fos.md)
- [caravans_h.fos](caravans_h.fos.md)
- [cave.fos](cave.fos.md)
- [cave_critter_h.fos](cave_critter_h.fos.md)
- [cave_groups.fos](cave_groups.fos.md)
- [cave_item_h.fos](cave_item_h.fos.md)
- [cavelog.fos](cavelog.fos.md)
- [cfg_file.fos](cfg_file.fos.md)
- [cheats.fos](cheats.fos.md)
- [cheats_help.fos](cheats_help.fos.md)
- [chosen_tabs.fos](chosen_tabs.fos.md)
- [smart_cursor.fos](client/smart_cursor.fos.md)
- [client_anti_cheat.fos](client_anti_cheat.fos.md)
- [client_combat.fos](client_combat.fos.md)
- [client_container_addons.fos](client_container_addons.fos.md)
- [client_critter_onhead.fos](client_critter_onhead.fos.md)
- [client_fef.fos](client_fef.fos.md)
- [client_fixboy.fos](client_fixboy.fos.md)
- [client_fov.fos](client_fov.fos.md)
- [client_interface.fos](client_interface.fos.md)
- [client_keybinds.fos](client_keybinds.fos.md)
- [client_main.fos](client_main.fos.md)
- [client_messages.fos](client_messages.fos.md)
- [client_recording.fos](client_recording.fos.md)
- [client_spawn_npc.fos](client_spawn_npc.fos.md)
- [client_timeouts.fos](client_timeouts.fos.md)
- [client_utils.fos](client_utils.fos.md)
- [combat.fos](combat.fos.md)
- [config_file.fos](config_file.fos.md)
- [critter_description.fos](critter_description.fos.md)
- [critter_item_movement.fos](critter_item_movement.fos.md)
- [critter_skin.fos](critter_skin.fos.md)
- [debug.fos](debug.fos.md)
- [den_metzger_guard.fos](den_metzger_guard.fos.md)
- [dev_menu.fos](dev_menu.fos.md)
- [devconnect.fos](devconnect.fos.md)
- [dialog.fos](dialog.fos.md)
- [dialog_altruist.fos](dialog_altruist.fos.md)
- [dialog_factions.fos](dialog_factions.fos.md)
- [drugs.fos](drugs.fos.md)
- [duel.fos](duel.fos.md)
- [economy.fos](economy.fos.md)
- [economy_bank.fos](economy_bank.fos.md)
- [economy_bankaccount.fos](economy_bankaccount.fos.md)
- [economy_banker.fos](economy_banker.fos.md)
- [economy_h.fos](economy_h.fos.md)
- [effects.fos](effects.fos.md)
- [elevators_h.fos](elevators_h.fos.md)
- [encounter_containers.fos](encounter_containers.fos.md)
- [encounter_guard.fos](encounter_guard.fos.md)
- [event_utils.fos](event_utils.fos.md)
- [event_warzone.fos](event_warzone.fos.md)
- [eventboss.fos](eventboss.fos.md)
- [explode.fos](explode.fos.md)
- [faction_data.fos](faction_data.fos.md)
- [factions.fos](factions.fos.md)
- [factions_bases.fos](factions_bases.fos.md)
- [factions_bases_h.fos](factions_bases_h.fos.md)
- [factions_generic.fos](factions_generic.fos.md)
- [factions_generic_bartender.fos](factions_generic_bartender.fos.md)
- [factions_h.fos](factions_h.fos.md)
- [factions_names.fos](factions_names.fos.md)
- [factions_news.fos](factions_news.fos.md)
- [factions_player.fos](factions_player.fos.md)
- [factions_recognition.fos](factions_recognition.fos.md)
- [factions_terminal.fos](factions_terminal.fos.md)
- [factions_vc_q_scoutsf.fos](factions_vc_q_scoutsf.fos.md)
- [fix_boy.fos](fix_boy.fos.md)
- [fixboy.fos](fixboy.fos.md)
- [floyd.fos](floyd.fos.md)
- [follower.fos](follower.fos.md)
- [follower_capturing.fos](follower_capturing.fos.md)
- [follower_common.fos](follower_common.fos.md)
- [followers_menu.fos](followers_menu.fos.md)
- [geiger.fos](geiger.fos.md)
- [generator.fos](generator.fos.md)
- [generic_guard.fos](generic_guard.fos.md)
- [globalmap_group.fos](globalmap_group.fos.md)
- [gm.fos](gm.fos.md)
- [grave.fos](grave.fos.md)
- [guard.fos](guard.fos.md)
- [hexShot.fos](hexShot.fos.md)
- [hexThrow.fos](hexThrow.fos.md)
- [hub_guard.fos](hub_guard.fos.md)
- [item_achievementbook.fos](item_achievementbook.fos.md)
- [item_bag_container.fos](item_bag_container.fos.md)
- [item_blueprint.fos](item_blueprint.fos.md)
- [item_bonus.fos](item_bonus.fos.md)
- [item_brahmin_dung.fos](item_brahmin_dung.fos.md)
- [item_dogtags.fos](item_dogtags.fos.md)
- [item_dynamic.fos](item_dynamic.fos.md)
- [item_flare.fos](item_flare.fos.md)
- [item_holodisk.fos](item_holodisk.fos.md)
- [item_lock.fos](item_lock.fos.md)
- [item_mapdoor.fos](item_mapdoor.fos.md)
- [item_misc.fos](item_misc.fos.md)
- [item_perks.fos](item_perks.fos.md)
- [item_radio.fos](item_radio.fos.md)
- [item_skills.fos](item_skills.fos.md)
- [item_stealth.fos](item_stealth.fos.md)
- [item_tent.fos](item_tent.fos.md)
- [la_ady_guard.fos](la_ady_guard.fos.md)
- [linetracer.fos](linetracer.fos.md)
- [lockers.fos](lockers.fos.md)
- [logging.fos](logging.fos.md)
- [logging_critter.fos](logging_critter.fos.md)
- [main.fos](main.fos.md)
- [main_planes.fos](main_planes.fos.md)
- [map_boneyard.fos](map_boneyard.fos.md)
- [map_bos_lh.fos](map_bos_lh.fos.md)
- [map_broken.fos](map_broken.fos.md)
- [map_denbus.fos](map_denbus.fos.md)
- [map_encounter.fos](map_encounter.fos.md)
- [map_gecko.fos](map_gecko.fos.md)
- [map_hub.fos](map_hub.fos.md)
- [map_klamath.fos](map_klamath.fos.md)
- [map_modoc.fos](map_modoc.fos.md)
- [map_ncr_downtown.fos](map_ncr_downtown.fos.md)
- [map_playerfaction_hq.fos](map_playerfaction_hq.fos.md)
- [map_random_cave.fos](map_random_cave.fos.md)
- [map_redding.fos](map_redding.fos.md)
- [map_redding_bank_vault.fos](map_redding_bank_vault.fos.md)
- [map_redding_lost.fos](map_redding_lost.fos.md)
- [map_redding_mine.fos](map_redding_mine.fos.md)
- [map_slaverun.fos](map_slaverun.fos.md)
- [map_starter.fos](map_starter.fos.md)
- [map_tent.fos](map_tent.fos.md)
- [mapper_crtypes.fos](mapper_crtypes.fos.md)
- [mapper_main.fos](mapper_main.fos.md)
- [mapper_plugin.fos](mapper_plugin.fos.md)
- [mapper_tilemap.fos](mapper_tilemap.fos.md)
- [media.fos](media.fos.md)
- [merc_dialog.fos](merc_dialog.fos.md)
- [mercs.fos](mercs.fos.md)
- [mercs_h.fos](mercs_h.fos.md)
- [mine.fos](mine.fos.md)
- [minigames.fos](minigames.fos.md)
- [mob.fos](mob.fos.md)
- [mob_quest.fos](mob_quest.fos.md)
- [mob_wave.fos](mob_wave.fos.md)
- [movable_container.fos](movable_container.fos.md)
- [multihex.fos](multihex.fos.md)
- [name_colorizing.fos](name_colorizing.fos.md)
- [ncr_guard.fos](ncr_guard.fos.md)
- [noob_camp_dialog.fos](noob_camp_dialog.fos.md)
- [noob_camp_guard.fos](noob_camp_guard.fos.md)
- [npc_barber.fos](npc_barber.fos.md)
- [npc_common.fos](npc_common.fos.md)
- [npc_names.fos](npc_names.fos.md)
- [npc_planes.fos](npc_planes.fos.md)
- [npc_shouter.fos](npc_shouter.fos.md)
- [npc_unlootable.fos](npc_unlootable.fos.md)
- [online_stats.fos](online_stats.fos.md)
- [parameters.fos](parameters.fos.md)
- [pdata.fos](pdata.fos.md)
- [perks.fos](perks.fos.md)
- [poison.fos](poison.fos.md)
- [polygon.fos](polygon.fos.md)
- [prod_barrel_junk.fos](prod_barrel_junk.fos.md)
- [prod_broc_flower.fos](prod_broc_flower.fos.md)
- [prod_chemicals.fos](prod_chemicals.fos.md)
- [prod_computer.fos](prod_computer.fos.md)
- [prod_flint.fos](prod_flint.fos.md)
- [prod_generic.fos](prod_generic.fos.md)
- [prod_machine.fos](prod_machine.fos.md)
- [prod_nukacola.fos](prod_nukacola.fos.md)
- [prod_plant_barley.fos](prod_plant_barley.fos.md)
- [prod_plant_fiber.fos](prod_plant_fiber.fos.md)
- [prod_plant_fruit.fos](prod_plant_fruit.fos.md)
- [prod_plant_tobacco.fos](prod_plant_tobacco.fos.md)
- [prod_rocks_minerals.fos](prod_rocks_minerals.fos.md)
- [prod_rocks_ore.fos](prod_rocks_ore.fos.md)
- [prod_rocks_uranium.fos](prod_rocks_uranium.fos.md)
- [prod_scavenge.fos](prod_scavenge.fos.md)
- [prod_still_rotgut.fos](prod_still_rotgut.fos.md)
- [prod_table_brahmin.fos](prod_table_brahmin.fos.md)
- [prod_tree_firewood.fos](prod_tree_firewood.fos.md)
- [prod_veins.fos](prod_veins.fos.md)
- [prod_xander_root.fos](prod_xander_root.fos.md)
- [production_h.fos](production_h.fos.md)
- [prospect_guard.fos](prospect_guard.fos.md)
- [prospect_miner.fos](prospect_miner.fos.md)
- [prospect_owner.fos](prospect_owner.fos.md)
- [prospects.fos](prospects.fos.md)
- [quest_bos_initiate.fos](quest_bos_initiate.fos.md)
- [quest_caesar_train.fos](quest_caesar_train.fos.md)
- [quest_caravan_box.fos](quest_caravan_box.fos.md)
- [quest_courier_boxes.fos](quest_courier_boxes.fos.md)
- [quest_first_tent.fos](quest_first_tent.fos.md)
- [quest_hub_sad_farmer.fos](quest_hub_sad_farmer.fos.md)
- [quest_killmobs_h.fos](quest_killmobs_h.fos.md)
- [quest_la_gunr_caravan.fos](quest_la_gunr_caravan.fos.md)
- [quest_la_warehouse.fos](quest_la_warehouse.fos.md)
- [questpool.fos](questpool.fos.md)
- [quests.fos](quests.fos.md)
- [radiation.fos](radiation.fos.md)
- [radio.fos](radio.fos.md)
- [raiders_attack.fos](raiders_attack.fos.md)
- [raiders_gomes.fos](raiders_gomes.fos.md)
- [recycler.fos](recycler.fos.md)
- [redd_marion.fos](redd_marion.fos.md)
- [reinforcements.fos](reinforcements.fos.md)
- [repair.fos](repair.fos.md)
- [replication.fos](replication.fos.md)
- [replication_hell.fos](replication_hell.fos.md)
- [rq_cave.fos](rq_cave.fos.md)
- [rq_fetcher.fos](rq_fetcher.fos.md)
- [scenery.fos](scenery.fos.md)
- [scypior_radiation.fos](scypior_radiation.fos.md)
- [se_door.fos](se_door.fos.md)
- [show.fos](show.fos.md)
- [shuffling_spawner.fos](shuffling_spawner.fos.md)
- [skills.fos](skills.fos.md)
- [slaverun.fos](slaverun.fos.md)
- [slaverun_dialog.fos](slaverun_dialog.fos.md)
- [slaverun_slave_hostile.fos](slaverun_slave_hostile.fos.md)
- [slaverun_slave_normal.fos](slaverun_slave_normal.fos.md)
- [slaverun_slaver.fos](slaverun_slaver.fos.md)
- [slots.fos](slots.fos.md)
- [spawner_container.fos](spawner_container.fos.md)
- [spawner_nc.fos](spawner_nc.fos.md)
- [spawner_ntown.fos](spawner_ntown.fos.md)
- [spawner_pvp.fos](spawner_pvp.fos.md)
- [spawner_town.fos](spawner_town.fos.md)
- [special_map_objects.fos](special_map_objects.fos.md)
- [talchem.fos](talchem.fos.md)
- [tasks.fos](tasks.fos.md)
- [teslaRecharge.fos](teslaRecharge.fos.md)
- [throwing.fos](throwing.fos.md)
- [time.fos](time.fos.md)
- [town.fos](town.fos.md)
- [town_h.fos](town_h.fos.md)
- [town_militia.fos](town_militia.fos.md)
- [towns.fos](towns.fos.md)
- [tracking.fos](tracking.fos.md)
- [trader.fos](trader.fos.md)
- [trader_container.fos](trader_container.fos.md)
- [trader_mcgrew.fos](trader_mcgrew.fos.md)
- [trains.fos](trains.fos.md)
- [traps.fos](traps.fos.md)
- [triggers.fos](triggers.fos.md)
- [unsafe_client.fos](unsafe_client.fos.md)
- [utils_h.fos](utils_h.fos.md)
- [wandering_ghoul.fos](wandering_ghoul.fos.md)
- [watcher.fos](watcher.fos.md)
- [weap_anim_table.fos](weap_anim_table.fos.md)
- [workbench.fos](workbench.fos.md)
- [world_common.fos](world_common.fos.md)
- [worldmap.fos](worldmap.fos.md)
- [worldmap.fos](worldmap.fos.md)
- [worldmap_data.fos](worldmap_data.fos.md)
- [worldmap_players.fos](worldmap_players.fos.md)

## Defines

| Name | Value | Description |
| :--- | :--- | :--- |
| __MACROS__ |  |  |
| valid | `# (ptr) (@ptr != null)` | Pointer validation macro Example: if(valid(ptr))... if(not valid(ptr))... |
| invalid | `# (ptr) (@ptr == null)` |  |
| remove_all_from_array | `\` | Removing every occurance of _v from array |
| remove_duplicates_from_array | `\` | Removing duplicates from array |
| append_array | `# (a1, a2) do { uint a1len = a1.length(); uint a2len = a2len = a2.length(); a1.resize(a1len + a2len); for(uint iter = 0; iter < a2len; iter++) { a1[a1len + iter] = a2[iter]; } } while(false);` | appending an array |
| random_from_array | `# (__arr) (__arr[Random(0, __arr.length() - 1)])` | Randomize elements |
| shuffle_array | `# (arr, datatype) do { datatype __temp; uint pos; for(uint __i = 0; __i < arr.length() - 1; __i++) { pos = Random(__i, arr.length() - 1); __temp = arr[pos]; arr[pos] = arr[__i]; arr[__i] = __temp; } } while(false)` |  |
| shuffle_ptrarray | `# (arr, datatype) do { datatype __temp; uint pos; for(uint __i = 0; __i < arr.length() - 1; __i++) { pos = Random(__i, arr.length() - 1); @__temp = arr[pos]; @arr[pos] = arr[__i]; @arr[__i] = __temp; } } while(false)` |  |
| fill_array | `\` | clear |
| _IsWithinRange | `# (__var, __x, __y)((__var >= (__x)) && (__var <= (__y)))` |  |
| LOOP | `# (__times) for(uint i = 0; i < __times; i++)` | execute code x times without iterating on array(s) |
| DInfo | `# (__cr, __s) { DLog(__s); DPlayerLog(__cr, __s); }` |  |
| _AdminLog | `\` |  |
| NPC_ID | `# (i)             (NPC_BASE_ID + (i))` | npc critter id |
| IS_FIRST_TIME | `(GetGvar(GVAR_is_first_time) == 1)` | after wipe |
| REAL_SEC2GAME_MINUTE | `# (s)   (int(float(s) / float(60) * __TimeMultiplier))` | time conv |
| TOGGLEFLAG | `# (x, flag)((x) ^= (flag))` | Flags |
| SPAWNED_NOT_LEGIT | `(0x80000000)` | SPAWNED_NOT_LEGIT flag is a part of spawner id value, which is hold in MAP_DATA_SPAWNER for maps and Val9 for items. If the flag is set, it means the item was spawned by an abuser and is not to be considered a part of the game.  Only admins can spawn locations/items without this flag by using [-legit] switch in the item/location spawning commands.  |
| _IsNotLegit | `# (value) (FLAG((value), SPAWNED_NOT_LEGIT))` |  |
| _IsLegit | `# (value) (!FLAG((value), SPAWNED_NOT_LEGIT))` |  |
| _AsNotLegit | `# (value) (int((value) | SPAWNED_NOT_LEGIT))` |  |
| _AsLegit | `# (value) (int((value) & (~SPAWNED_NOT_LEGIT)))` |  |
| _SetTimeout | `# (__cr, __timeout, __time)__cr.TimeoutBase[__timeout] = AFTER(__time)` |  |
| _NpcWalk | `# (npc, hexX, hexY)npc.MoveToHex(hexX, hexY, 0xFF, false, 0)` | ************** Critter *************************// Move |
| _NpcRun | `# (npc, hexX, hexY)npc.MoveToHex(hexX, hexY, 0xFF, true, 0)` |  |
| _SameFaction | `# (cr1, cr2)(cr1.Stat[ST_TEAM_ID] == cr2.Stat[ST_TEAM_ID])` | Factions |
| _SamePlayerFaction | `# (cr1, cr2)(_SameFaction(cr1, cr2) && (cr1.Stat[ST_TEAM_ID] > FACTION_END))` |  |
| _CritCountItem | `# (cr, pid)cr.CountItem(pid)` | Items |
| _CritAddItem | `# (cr, pid, count)cr.AddItem(pid, count)` |  |
| _CritDeleteItem | `# (cr, pid, count)cr.DeleteItem(pid, count)` |  |
| _CritGetItem | `# (cr, pid)cr.GetItem(pid, -1)` |  |
| _CritGetItemHand | `# (cr) cr.GetItem(0, SLOT_HAND1)` |  |
| _CritGetItemHandExt | `# (cr) cr.GetItem(0, SLOT_HAND2)` |  |
| _CritGetItemArmor | `# (cr) cr.GetItem(0, SLOT_ARMOR)` |  |
| _CritGetItemHead | `# (cr) cr.GetItem(0, SLOT_HEAD)` |  |
| _CritGetItemInv | `# (cr, pid)cr.GetItem(pid, SLOT_INV)` |  |
| _CritMoveItem | `# (cr, item, toSlot)cr.MoveItem(item.Id, item.GetCount(), toSlot)` |  |
| _CritDropItem | `# (cr, item)cr.MoveItem(item.Id, item.GetCount(), 0xFF)` |  |
| _CritDropItemCount | `# (cr, item, count)cr.MoveItem(item.Id, count, 0xFF)` |  |
| _CritChangeHand | `\` |  |
| _IncItem | `# (item, count)item.SetCount(item.GetCount() + (count))` |  |
| _SubItem | `\` |  |
| _CritCanLoseItemsOnDead | `# (cr) (not (_CritHasMode(cr, MODE_NO_STEAL)&& !cr.IsPlayer()) && not _CritHasMode(cr, MODE_NO_DROP) && not _CritHasMode(cr, MODE_NO_LOOT))` |  |
| _CritCanDropItemsOnDead | `# (cr) (_CritCanLoseItemsOnDead(cr) && not (cr.IsPlayer() && not _PlayerDropEnabled(cr, cr.GetMap())))` |  |
| _PlayerDropEnabled | `# (cr, map) (PLAYER_NO_DROP == 0 || (valid(map) && _MapHasMode(map, MAP_MODE_LOOT_DROP)))` |  |
| _ItemIsBroken | `# (item) (item.IsDeteriorable() && FLAG(item.BrokenFlags, BI_BROKEN))` |  |
| _CritHasPerk | `# (cr, perk)(cr.Perk[perk] > 0)` | Parameters Perks, Traits |
| _CritGetPerk | `# (cr, perk)(cr.Perk[perk])` |  |
| _CritSetPerk | `# (cr, perk)cr.PerkBase[perk] = 1` |  |
| _CritUnsetPerk | `# (cr, perk)cr.PerkBase[perk] = 0` |  |
| _CritHasMode | `# (cr, mode)(cr.Mode[mode] > 0)` |  |
| _CritSetMode | `# (cr, mode)cr.ModeBase[mode] = 1` |  |
| _CritUnsetMode | `# (cr, mode)cr.ModeBase[mode] = 0` |  |
| _CritHasTrait | `# (cr, trait)(cr.Trait[trait] > 0)` |  |
| _CritInjure |  | Injure body |
| _CritHasInjureBody | `# (cr, injure)(cr.Damage[injure] > 0)` |  |
| _CritDamaged | `# (cr, injure)(cr.Damage[injure] > 0)` |  |
| _CritInjureBody | `# (cr, injure)cr.DamageBase[injure] = 1` |  |
| _CritUninjureBody | `# (cr, injure)cr.DamageBase[injure] = 0` |  |
| _CritIsInjured | `# (cr) (cr.Damage[DAMAGE_EYE] > 0 || cr.Damage[DAMAGE_RIGHT_ARM] > 0 || cr.Damage[DAMAGE_LEFT_ARM] > 0 || cr.Damage[DAMAGE_RIGHT_LEG] > 0 || cr.Damage[DAMAGE_LEFT_LEG] > 0)` |  |
| _CritChangeHp | `\` | Hp |
| _CritNeedFirstAid | `# (cr) (cr.Stat[ST_CURRENT_HP] < cr.Stat[ST_MAX_LIFE])` |  |
| _CritNeedDoctor | `# (cr) (_CritHasInjureBody(cr, DAMAGE_EYE) || _CritHasInjureBody(cr, DAMAGE_RIGHT_ARM) || _CritHasInjureBody(cr, DAMAGE_LEFT_ARM) || _CritHasInjureBody(cr, DAMAGE_RIGHT_LEG) || _CritHasInjureBody(cr, DAMAGE_LEFT_LEG))` |  |
| _CritFingersDoorId | `# (critterId) (0x80000000 | (critterId))` | Key id |
| _CritEyesDoorId | `# (critterId) (0x40000000 | (critterId))` |  |
| _CritIsTagSkill | `# (cr, skillNum)(cr.TagSkill[TAG_SKILL1] == int(skillNum) || cr.TagSkill[TAG_SKILL2] == int(skillNum) || cr.TagSkill[TAG_SKILL3] == int(skillNum) || cr.TagSkill[TAG_SKILL4] == int(skillNum))` | Skills |
| _CritIsMale | `# (cr) (cr.Stat[ST_GENDER] == GENDER_MALE)` | Gender |
| _CritIsFemale | `# (cr) (cr.Stat[ST_GENDER] == GENDER_FEMALE)` |  |
| _CritIsIt | `# (cr) (cr.Stat[ST_GENDER] == GENDER_IT)` |  |
| _IsSneaking | `# (cr)   (cr.Mode[MODE_HIDE] != 0)` | Sneaking |
| _EnableSneak | `# (cr)  cr.ModeBase[MODE_HIDE] = 1` |  |
| _DisableSneak | `# (cr) cr.ModeBase[MODE_HIDE] = 0` |  |
| _D6 | `# (chance)       ((chance) <= uint(Random(1, 6)))` | Dice throw macros |
| _D10 | `# (chance)      ((chance) <= uint(Random(1, 10)))` |  |
| _D20 | `# (chance)      ((chance) <= uint(Random(1, 20)))` |  |
| _D100 | `# (chance)     ((chance) <= uint(Random(1, 100)))` |  |
| _D300 | `# (chance)     ((chance) <= uint(Random(1, 300)))` |  |
| _D1000 | `# (chance)    ((chance) <= uint(Random(1, 1000)))` |  |
| _TurnRight | `# (dir, times)(((dir) + (times)) % 6)` | Changing directions |
| _TurnLeft | `# (dir, times)(((dir) - (times)) % 6)` |  |
| _TurnAround | `# (dir) (_TurnRight((dir), 3))` |  |
| _NpcEraseFirstPlane | `# (npc) npc.ErasePlane(-1, false)` | Npc planes |
| _NpcEraseAllPlanes | `# (npc) npc.ErasePlane(-1, true)` |  |
| _NpcEraseFirstPlaneWalk | `# (npc) npc.ErasePlane(AI_PLANE_WALK, false)` |  |
| _NpcEraseAllPlanesWalk | `# (npc) npc.ErasePlane(AI_PLANE_WALK, true)` |  |
| _NpcEraseFirstPlaneAttack | `# (npc) npc.ErasePlane(AI_PLANE_ATTACK, false)` |  |
| _NpcEraseAllPlanesAttack | `# (npc) npc.ErasePlane(AI_PLANE_ATTACK, true)` |  |
| _NpcEraseFirstPlanePick | `# (npc) npc.ErasePlane(AI_PLANE_PICK, false)` |  |
| _NpcEraseAllPlanesPick | `# (npc) npc.ErasePlane(AI_PLANE_PICK, true)` |  |
| _IsOffline | `# (cr)    (cr.IsDisconnected)` | Online/offline status (NPCs are always online)  |
| _IsOnline | `# (cr)     (!_IsOffline(cr))` |  |
| _EndTurn | `# (cr) do { if(cr.GetMap().IsTurnBased() && cr.Param[ST_CURRENT_AP] > 0) { cr.ParamBase[ST_CURRENT_AP] = 0; cr.ParamBase[ST_MOVE_AP] = 0; } } while(false)` | Ending turn in TB. A better API for TB mode is needed.  |
| _Desneak | `# (cr) if(cr.Mode[MODE_HIDE] != 0 && _IsRealPlayer(cr)) { cr.ModeBase[MODE_HIDE] = 0; }` | Desneak (real players only) |
| _WeaponIsHtHAttack | `# (proto, use)(_WeaponSkill(proto, use) == SK_UNARMED)` | ************** Items ***************************// Weapon |
| _WeaponIsGunAttack | `# (proto, use)(_WeaponSkill(proto, use) == SK_SMALL_GUNS || _WeaponSkill(proto, use) == SK_BIG_GUNS || _WeaponSkill(proto, use) == SK_ENERGY_WEAPONS)` |  |
| _WeaponIsRangedAttack | `# (proto, use)(_WeaponIsGunAttack(weap, use) || _WeaponSkill(proto, use) == SK_THROWING)` |  |
| _WeaponIsPrimaryAviable | `# (proto) ((proto.Weapon_ActiveUses & 1) != 0)` |  |
| _WeaponIsSecondaryAviable | `# (proto) ((proto.Weapon_ActiveUses & 2) != 0)` |  |
| _WeaponIsThirdAviable | `# (proto) ((proto.Weapon_ActiveUses & 4) != 0)` |  |
| _WeaponSkill | `# (proto, use)((use) == 0 ? proto.Weapon_Skill_0  : ((use) == 1 ? proto.Weapon_Skill_1  : ((use) == 2 ? proto.Weapon_Skill_2  : 0)))` |  |
| _WeaponDmgType | `# (proto, use)((use) == 0 ? proto.Weapon_DmgType_0 : ((use) == 1 ? proto.Weapon_DmgType_1 : ((use) == 2 ? proto.Weapon_DmgType_2 : 0)))` |  |
| _WeaponAnim2 | `# (proto, use)((use) == 0 ? proto.Weapon_Anim2_0  : ((use) == 1 ? proto.Weapon_Anim2_1  : ((use) == 2 ? proto.Weapon_Anim2_2  : 0)))` |  |
| _WeaponDmgMin | `# (proto, use)((use) == 0 ? proto.Weapon_DmgMin_0 : ((use) == 1 ? proto.Weapon_DmgMin_1 : ((use) == 2 ? proto.Weapon_DmgMin_2 : 0)))` |  |
| _WeaponDmgMax | `# (proto, use)((use) == 0 ? proto.Weapon_DmgMax_0 : ((use) == 1 ? proto.Weapon_DmgMax_1 : ((use) == 2 ? proto.Weapon_DmgMax_2 : 0)))` |  |
| _WeaponMaxDist | `# (proto, use)((use) == 0 ? proto.Weapon_MaxDist_0 : ((use) == 1 ? proto.Weapon_MaxDist_1 : ((use) == 2 ? proto.Weapon_MaxDist_2 : 0)))` |  |
| _WeaponEffect | `# (proto, use)((use) == 0 ? proto.Weapon_Effect_0 : ((use) == 1 ? proto.Weapon_Effect_1 : ((use) == 2 ? proto.Weapon_Effect_2 : 0)))` |  |
| _WeaponRound | `# (proto, use)((use) == 0 ? proto.Weapon_Round_0  : ((use) == 1 ? proto.Weapon_Round_1  : ((use) == 2 ? proto.Weapon_Round_2  : 0)))` |  |
| _WeaponApCost | `# (proto, use)((use) == 0 ? proto.Weapon_ApCost_0 : ((use) == 1 ? proto.Weapon_ApCost_1 : ((use) == 2 ? proto.Weapon_ApCost_2 : 0)))` |  |
| _WeaponSoundId | `# (proto, use)((use) == 0 ? proto.Weapon_SoundId_0 : ((use) == 1 ? proto.Weapon_SoundId_1 : ((use) == 2 ? proto.Weapon_SoundId_2 : 0)))` |  |
| _WeaponRemove | `# (proto, use)((use) == 0 ? proto.Weapon_Remove_0 : ((use) == 1 ? proto.Weapon_Remove_1 : ((use) == 2 ? proto.Weapon_Remove_2 : false)))` |  |
| _WeaponAim | `# (proto, use)((use) == 0 ? proto.Weapon_Aim_0    : ((use) == 1 ? proto.Weapon_Aim_1    : ((use) == 2 ? proto.Weapon_Aim_2    : false)))` |  |
| _WeaponModeUse | `# (weaponMode) ((weaponMode) & 0xF)` |  |
| _WeaponModeAim | `# (weaponMode) (((weaponMode) >> 4) & 0xF)` |  |
| _WeaponModeMake | `# (use, aim)((((aim) << 4) | ((use) & 0xF)) & 0xFF)` |  |
| _LockerIsOpen | `# (door)   ((door.LockerCondition & LOCKER_ISOPEN) != 0)` | Locker |
| _LockerIsClose | `# (door)  (not _LockerIsOpen(door))` |  |
| _CarIsBioEngine | `# (car) ((car.Val0 & CAR_BIO_ENGINE) != 0)` | Car |
| _CarSetBioEngine | `# (car) car.Val0 |= CAR_BIO_ENGINE` |  |
| _CarIsNoLockpick | `# (car) ((car.Val0 & CAR_NO_LOCKPICK) != 0)` |  |
| _CarIsLockpickTimeout | `# (car) ((car.Val0 & CAR_LOCKPICK_TIMEOUT) != 0)` |  |
| _CarSetNoLockpick | `# (car) car.Val0 |= CAR_NO_LOCKPICK` |  |
| _CarGetFuelTank | `# (car) (car.Proto.Car_TankVolume)` |  |
| _CarGetMaxDeterioration | `# (car) (car.Proto.Car_MaxDeterioration)` |  |
| _IsCaravanCar | `# (__proto)  (__proto == PID_CARAVAN_WHITE || __proto == PID_CARAVAN_ORANGE)` |  |
| _LightIsIgnoreDir | `# (lightItem, dir)(FLAG(lightItem.LightFlags, 1 << CLAMP(dir, 0, 5)))` | Light |
| _LightSetIgnoreDir | `# (lightItem, dir)(SETFLAG(lightItem.LightFlags, 1 << CLAMP(dir, 0, 5)))` |  |
| _LightUnsetIgnoreDir | `# (lightItem)   (UNSETFLAG(lightItem.LightFlags, 1 << CLAMP(dir, 0, 5)))` |  |
| _LightIsGlobal | `# (lightItem)         (FLAG(lightItem.LightFlags, 1 << 6))` |  |
| _LightSetGlobal | `# (lightItem)        (SETFLAG(lightItem.LightFlags, 1 << 6))` |  |
| _LightUnsetGlobal | `# (lightItem)      (UNSETFLAG(lightItem.LightFlags, 1 << 6))` |  |
| _LightIsInverse | `# (lightItem)        (FLAG(lightItem.LightFlags, 1 << 7))` |  |
| _LightSetInverse | `# (lightItem)       (SETFLAG(lightItem.LightFlags, 1 << 7))` |  |
| _LightUnsetInverse | `# (lightItem)     (UNSETFLAG(lightItem.LightFlags, 1 << 7))` |  |
| _IsArmedBomb | `# (pid) (pid == PID_ACTIVE_DYNAMITE || pid == PID_ACTIVE_PLASTIC_EXPLOSIVE)` | Misc |
| _CritHasExtMode | `# (cr, mode)((cr.Mode[MODE_EXT] & (mode)) != 0)` |  |
| _CritSetExtMode | `# (cr, mode)(cr.ModeBase[MODE_EXT] = cr.Mode[MODE_EXT] | (mode))` |  |
| _CritUnsetExtMode | `# (cr, mode)(cr.ModeBase[MODE_EXT] = (cr.Mode[MODE_EXT] | (mode)) ^ (mode))` |  |
| _IsTrader | `# (cr)     (_CritHasExtMode(cr, MODE_EXT_TRADER))` |  |
| _IsFollower | `# (cr)   (_CritHasExtMode(cr, MODE_EXT_FOLLOWER))` |  |
| _IsSlave | `# (cr)      (_CritHasExtMode(cr, MODE_EXT_FOLLOWER) && cr.Stat[ST_DIALOG_ID] == DIALOG_follower_slave)` |  |
| _IsBrahmin | `# (cr)      (_CritHasExtMode(cr, MODE_EXT_FOLLOWER) && cr.Stat[ST_DIALOG_ID] == DIALOG_follower_brahmin)` |  |
| _IsGuard | `# (cr)      (_CritHasExtMode(cr, MODE_EXT_GUARD))` |  |
| _IsTrueNpc | `# (cr)    (cr.IsNpc() && !_IsFollower(cr))` |  |

